{"version":3,"file":"index.umd.js","sources":["../src/styles.ts","../src/getPaddingBottom.tsx","../node_modules/react-img-tag/src/imgTagString.ts","../src/noscript.ts","../src/supportsWebP.ts","../src/FastImageImage.tsx","../node_modules/react-video-tag/src/videoTagString.ts","../src/FastImageVideo.tsx","../src/FastImage.tsx"],"sourcesContent":["import { css } from 'emotion'\n\nexport const cssContainerOuter = css`\n    position: relative;\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n`\n\nexport const cssContainerInner = css`\n    position: relative;\n    display: block;\n    top: 0;\n    left: 0;\n`\n\nexport const cssAsset = css`\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    vertical-align: middle;\n    top: 0;\n    left: 0;\n`\n","export const getPaddingBottom = (width?: number, height?: number) => {\n    if (!width || !height) return '100%'\n    return `${(height / width) * 100}%`\n}\n","export interface ImgTagProps {\n    class?: string\n    className?: string\n    src?: string\n    srcSet?: string\n    sizes?: string\n    title?: string\n    alt?: string\n    width?: number\n    height?: number\n}\n\nexport const imgTagString = (props: ImgTagProps = {}): string => {\n    const classOrClassName = props.className || props.class\n    const classString = classOrClassName ? ` class=\"${classOrClassName}\"` : ``\n    const src = props.src ? `src=\"${props.src}\" ` : `src=\"\" ` // required attribute\n    const srcSet = props.srcSet ? `srcset=\"${props.srcSet}\" ` : ``\n    const sizes = props.sizes ? `sizes=\"${props.sizes}\" ` : ``\n    const title = props.title ? `title=\"${props.title}\" ` : ``\n    const alt = props.alt ? `alt=\"${props.alt}\" ` : `alt=\"\" ` // required attribute\n    const width = props.width ? `width=\"${props.width}\" ` : ``\n    const height = props.height ? `height=\"${props.height}\" ` : ``\n\n    return `<img ${width}${height}${src}${srcSet}${alt}${title}${sizes}${classString}/>`\n}\n","export const noscript = (content: string) => `<noscript>${content}</noscript>`\n","// https://github.com/bfred-it/supports-webp\n// tslint:disable-next-line\nconst canvas: any = typeof document === 'object' ? document.createElement('canvas') : {}\ncanvas.width = canvas.height = 1\nconst supportsWebP: boolean = canvas.toDataURL\n    ? canvas.toDataURL('image/webp').indexOf('image/webp') === 5\n    : false\nexport default supportsWebP\n","import React, { PureComponent } from 'react'\nimport { cx } from 'emotion'\nimport { cssContainerInner, cssContainerOuter, cssAsset } from './styles'\nimport { FastImageCommonProps } from './FastImage'\nimport { getPaddingBottom } from './getPaddingBottom'\nimport { imgTagString } from 'react-img-tag'\nimport { noscript } from './noscript'\nimport supportsWebP from './supportsWebP'\n\nexport interface FastImageImageProps extends FastImageCommonProps {\n    alt: string\n    src: string\n    srcSet: string\n    base64: string\n    webPSrc: string\n    webPSrcSet: string\n    sizes: string\n}\n\nexport class FastImageImage extends PureComponent<Partial<FastImageImageProps>> {\n    media?: HTMLImageElement\n    inner?: HTMLElement\n    outer?: HTMLElement\n    intersectionObserver?: IntersectionObserver\n\n    constructor(props: FastImageImageProps) {\n        super(props)\n        // tslint:disable-next-line\n        if (typeof window === 'undefined') return\n        if ((window as any).IntersectionObserver) {\n            this.intersectionObserver = new IntersectionObserver(this.onIntersection, {\n                rootMargin: props.lazyLoadMargin,\n                threshold: 0,\n            })\n        }\n    }\n\n    onIntersection = (entries: IntersectionObserverEntry[]) => {\n        if (!this.intersectionObserver) return\n        const entry = entries[0] || {}\n        // Edge doesn't currently support isIntersecting, so also test for an intersectionRatio > 0\n        if (entry.isIntersecting || entry.intersectionRatio > 0) {\n            this.intersectionObserver.unobserve(entry.target)\n            this.onVisible()\n        }\n    }\n\n    componentWillUnmount() {\n        if (!this.intersectionObserver) return\n        if (this.outer) {\n            this.intersectionObserver.unobserve(this.outer)\n        }\n    }\n\n    onNextFrame = () => {\n        if (this.media && this.outer && this.inner) {\n            this.media.className = cx(\n                cssAsset,\n                this.props.classNameMedia,\n                this.props.classNameMediaVisible,\n            )\n            this.outer.className = cx(\n                cssContainerOuter,\n                this.props.className,\n                this.props.classNameVisible,\n            )\n            this.inner.className = cx(\n                cssContainerInner,\n                this.props.classNameContainer,\n                this.props.classNameContainerVisible,\n            )\n        }\n    }\n\n    onDecode = () => {\n        if (this.inner && this.media) {\n            this.inner.appendChild(this.media)\n            setTimeout(this.onNextFrame, 32)\n            if (this.props.onAddedToDOM) {\n                this.props.onAddedToDOM()\n            }\n        }\n    }\n\n    onLoad = () => {\n        if ((this.media as any).decode) {\n            ;(this.media as any).decode().then(this.onDecode)\n        } else {\n            setTimeout(this.onDecode)\n        }\n    }\n\n    src = () => (supportsWebP ? this.props.webPSrc || this.props.src : this.props.src)\n    srcSet = () => (supportsWebP ? this.props.webPSrcSet || this.props.srcSet : this.props.srcSet)\n\n    onVisible = () => {\n        const media = new Image()\n        // We will load the image, then decode it, then add it to the DOM.\n        // By doing this we can ensure we will minimize frame drops.\n        media.onload = this.onLoad\n        // Set props.\n        // Order is important.\n        media.sizes = this.props.sizes || ''\n        media.srcset = this.srcSet() || ''\n        media.src = this.src() || ''\n        media.alt = this.props.alt || ''\n        media.className = cx(cssAsset, this.props.classNameMedia)\n        this.media = media\n    }\n\n    captureInnerRef = (ref: HTMLElement) => (this.inner = ref)\n    captureOuterRef = (ref: HTMLElement) => {\n        if (ref && this.intersectionObserver) {\n            this.intersectionObserver.observe(ref)\n        }\n        this.outer = ref\n    }\n\n    render() {\n        const {\n            base64,\n            className,\n            classNameContainer,\n            classNameMedia,\n            lazy,\n            alt,\n            sizes,\n            height,\n            width,\n        } = this.props\n        const imgHtml = imgTagString({\n            src: this.src(),\n            srcSet: this.srcSet(),\n            alt,\n            sizes,\n            className: cx(cssAsset, classNameMedia),\n        })\n        const html = lazy ? noscript(imgHtml) : imgHtml\n        return (\n            <span\n                style={{ width }}\n                className={cx(cssContainerOuter, className)}\n                ref={this.captureOuterRef}\n            >\n                <span\n                    className={cx(cssContainerInner, classNameContainer)}\n                    style={{\n                        paddingBottom: getPaddingBottom(width, height),\n                        backgroundSize: 'cover',\n                        backgroundImage: base64 ? `url('${base64}')` : undefined,\n                    }}\n                    ref={lazy ? this.captureInnerRef : undefined}\n                    dangerouslySetInnerHTML={{ __html: html }}\n                />\n            </span>\n        )\n    }\n}\n","export interface VideoTagProps {\n    class?: string\n    className?: string\n    src?: string\n    poster?: string\n    type?: string\n    muted?: boolean\n    autoPlay?: boolean\n    playsInline?: boolean\n    loop?: boolean\n}\n\nexport const videoTagString = (props: VideoTagProps = {}): string => {\n    const classOrClassName = props.className || props.class\n    const classString = classOrClassName ? ` class=\"${classOrClassName}\"` : ``\n    const muted = props.muted ? ` muted` : ``\n    const autoPlay = props.autoPlay ? ` autoplay` : ``\n    const playsInline = props.playsInline ? ` playsinline` : ``\n    const loop = props.loop ? ` loop` : ``\n    const poster = props.poster ? ` poster` : ``\n    const src = props.src ? ` src=\"${props.src}\"` : ` src=\"\"` // required\n    const type = props.type ? ` type=\"${props.type}\"` : ``\n\n    return `<video${classString}${muted}${autoPlay}${playsInline}${loop}${poster}><source${src}${type}></video>`\n}\n","import React from 'react'\nimport { cx } from 'emotion'\nimport { cssContainerInner, cssContainerOuter, cssAsset } from './styles'\nimport { FastImageCommonProps } from './FastImage'\nimport { videoTagString } from 'react-video-tag'\nimport { getPaddingBottom } from './getPaddingBottom'\nimport { noscript } from './noscript'\nimport supportsWebP from './supportsWebP'\n\nexport interface FastImageVideoProps extends FastImageCommonProps {\n    src: string\n    posterSrc: string\n    posterWebPSrc: string\n    posterBase64: string\n}\n\nexport class FastImageVideo extends React.PureComponent<Partial<FastImageVideoProps>> {\n    media?: HTMLVideoElement\n    inner?: HTMLElement\n    outer?: HTMLElement\n    intersectionObserver?: IntersectionObserver\n\n    constructor(props: FastImageVideoProps) {\n        super(props)\n        // tslint:disable-next-line\n        if (typeof window === 'undefined') return\n        if ((window as any).IntersectionObserver) {\n            this.intersectionObserver = new IntersectionObserver(this.onIntersection, {\n                rootMargin: props.lazyLoadMargin,\n                threshold: 0,\n            })\n        }\n    }\n\n    onIntersection = (entries: IntersectionObserverEntry[]) => {\n        if (!this.intersectionObserver) return\n        const entry = entries[0] || {}\n        // Edge doesn't currently support isIntersecting, so also test for an intersectionRatio > 0\n        if (entry.isIntersecting || entry.intersectionRatio > 0) {\n            this.intersectionObserver.unobserve(entry.target)\n            this.onVisible()\n        }\n    }\n\n    componentWillUnmount() {\n        if (!this.intersectionObserver) return\n        if (this.outer) {\n            this.intersectionObserver.unobserve(this.outer)\n        }\n    }\n\n    onNextFrame = () => {\n        if (this.media) {\n            this.media.className = cx(\n                cssAsset,\n                this.props.classNameMedia,\n                this.props.classNameMediaVisible,\n            )\n        }\n    }\n\n    onVisible = () => {\n        if (!this.inner) return\n        const media: any = document.createElement('video')\n        media.className = cx(cssAsset, this.props.classNameMedia)\n\n        media.src = this.src()\n        media.setAttribute('src', this.src())\n\n        media.poster = this.poster()\n        media.setAttribute('poster', this.poster())\n\n        media.muted = true\n        media.setAttribute('muted', '')\n\n        media.playsinline = true\n        media.setAttribute('playsinline', '')\n\n        media.autoplay = true\n        media.setAttribute('autoplay', '')\n\n        media.loop = true\n        media.setAttribute('loop', '')\n\n        this.inner.appendChild(media)\n\n        setTimeout(this.onNextFrame, 32)\n    }\n\n    captureInnerRef = (ref: HTMLElement) => (this.inner = ref)\n    captureOuterRef = (ref: HTMLElement) => {\n        if (ref && this.intersectionObserver) {\n            this.intersectionObserver.observe(ref)\n        }\n        this.outer = ref\n    }\n\n    src = () => this.props.src || ''\n    poster = () =>\n        supportsWebP ? this.props.posterWebPSrc || this.props.posterSrc : this.props.posterSrc\n\n    render() {\n        const {\n            posterBase64,\n            className,\n            classNameContainer,\n            classNameMedia,\n            lazy,\n            height,\n            width,\n        } = this.props\n        const videoHtml = videoTagString({\n            src: this.src(),\n            poster: this.poster(),\n            muted: true,\n            autoPlay: true,\n            playsInline: true,\n            loop: true,\n            className: cx(cssAsset, classNameMedia),\n        })\n        const html = lazy ? noscript(videoHtml) : videoHtml\n        return (\n            <span\n                style={{ width }}\n                className={cx(cssContainerOuter, className)}\n                ref={this.captureOuterRef}\n            >\n                <span\n                    className={cx(cssContainerInner, classNameContainer)}\n                    style={{\n                        paddingBottom: getPaddingBottom(width, height),\n                        backgroundSize: 'cover',\n                        backgroundImage: posterBase64 ? `url('${posterBase64}')` : undefined,\n                    }}\n                    ref={lazy ? this.captureInnerRef : undefined}\n                    dangerouslySetInnerHTML={{ __html: html }}\n                />\n            </span>\n        )\n    }\n}\n","import React from 'react'\nimport { FastImageImage } from './FastImageImage'\nimport { FastImageVideo } from './FastImageVideo'\n\nexport interface FastImageCommonProps {\n    /**\n     * Media is surrounded by two spans for positioning.\n     * This class will be added to the outer span.\n     */\n    className?: string\n    /**\n     * Media is surrounded by two spans for positioning.\n     * This class will be added to the outer span.\n     * This class will be added when the image is visible and added to the DOM.\n     */\n    classNameVisible?: string\n    /**\n     * Media is surrounded by two spans for positioning.\n     * This class will be added to the inner span.\n     */\n    classNameContainer?: string\n    /**\n     * Media is surrounded by two spans for positioning.\n     * This class will be added to the inner span.\n     * This class will be added when the image is visible and added to the DOM.\n     */\n    classNameContainerVisible?: string\n    /**\n     * The css class that will go on the media element (img or video).\n     */\n    classNameMedia?: string\n    /**\n     * The css class that will go on the media element (img or video).\n     * This class will be added when the image is visible and added to the DOM.\n     */\n    classNameMediaVisible?: string\n    /**\n     * Whether or not to wait for the image to enter the viewport to load it.\n     */\n    lazy?: boolean\n    /**\n     * Determines when the media will be loaded.\n     * e.g. 200px\n     */\n    lazyLoadMargin?: string\n    /**\n     * The original width of the media.\n     */\n    width: number\n    /**\n     * The original height of the media.\n     */\n    height: number\n    onLoad?: Function\n    onAddedToDOM?: Function\n}\n\nexport interface FastImageImageBestProps extends FastImageCommonProps {\n    // img\n    imgAlt: string\n    imgSizes: string\n    imgSrc: string\n    imgSrcSet: string\n    imgBase64: string\n    // img webp\n    imgWebPSrc: string\n    imgWebPSrcSet: string\n}\n\nexport interface FastImageVideoBestProps extends FastImageCommonProps {\n    // video\n    videoSrc: string\n    // videoPoster\n    videoPosterSrc: string\n    videoPosterWebPSrc: string\n    videoPosterBase64: string\n}\n\nexport type FastImageBestProps = FastImageImageBestProps & FastImageVideoBestProps\nexport type FastImageProps = Partial<FastImageImageBestProps & FastImageVideoBestProps>\n\nconst defaultProps = {\n    lazy: true,\n    lazyLoadMargin: '500px',\n}\n\nexport class FastImage extends React.PureComponent<FastImageProps> {\n    static defaultProps: FastImageProps = defaultProps as FastImageProps\n    render() {\n        if (this.props.imgSrc) {\n            const {\n                imgAlt,\n                imgSizes,\n                imgSrc,\n                imgSrcSet,\n                imgWebPSrc,\n                imgWebPSrcSet,\n                imgBase64,\n                ...otherProps\n            } = this.props\n            return (\n                <FastImageImage\n                    src={imgSrc as string}\n                    srcSet={imgSrcSet as string}\n                    base64={imgBase64 as string}\n                    webPSrc={imgWebPSrc as string}\n                    webPSrcSet={imgWebPSrcSet as string}\n                    alt={imgAlt as string}\n                    sizes={imgSizes as string}\n                    {...otherProps}\n                />\n            )\n        }\n        if (this.props.videoSrc) {\n            const {\n                videoSrc,\n                videoPosterSrc,\n                videoPosterWebPSrc,\n                videoPosterBase64,\n                ...otherProps\n            } = this.props\n            return (\n                <FastImageVideo\n                    src={videoSrc as string}\n                    posterSrc={videoPosterSrc as string}\n                    posterWebPSrc={videoPosterWebPSrc as string}\n                    posterBase64={videoPosterBase64 as string}\n                    {...otherProps}\n                />\n            )\n        }\n        console.error('No src for FastImage.')\n        return null\n    }\n}\n"],"names":["css","tslib_1.__extends","cx","React","PureComponent"],"mappings":"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"}