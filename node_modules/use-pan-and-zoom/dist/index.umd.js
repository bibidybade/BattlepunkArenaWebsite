!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):(n||self).usePanAndZoom=e(n.react)}(this,function(n){function e(){return e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},e.apply(this,arguments)}function t(){}var r=function(n,e){return function(t){return Math.max(n,Math.min(t,e))}};function o(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function a(n,t){for(var r=e({},t);n;)r.x-=n.offsetLeft,r.y-=n.offsetTop,n=n.offsetParent;return r}return function(u){var i,f,s,c=void 0===u?{}:u,l=c.enablePan,m=void 0===l||l,v=c.enableZoom,p=void 0===v||v,y=c.requireCtrlToZoom,d=void 0!==y&&y,g=c.disableWheel,x=void 0!==g&&g,h=c.panOnDrag,b=void 0===h||h,C=c.preventClickOnPan,P=void 0===C||C,k=c.zoomSensitivity,M=void 0===k?.01:k,z=c.minZoom,Z=void 0===z?0:z,w=c.maxZoom,Y=void 0===w?Infinity:w,E=c.minX,L=void 0===E?-Infinity:E,X=c.maxX,T=void 0===X?Infinity:X,D=c.minY,I=void 0===D?-Infinity:D,O=c.maxY,A=void 0===O?Infinity:O,S=c.initialZoom,j=void 0===S?1:S,q=c.initialPan,H=void 0===q?{x:0,y:0}:q,W=c.onPanStart,R=void 0===W?t:W,K=c.onPan,U=void 0===K?t:K,B=c.onPanEnd,F=void 0===B?t:B,G=c.onZoom,J=void 0===G?t:G,N=n.useRef(null),Q=(i=n.useState(!1)[1],n.useCallback(function(){i(function(n){return!n})},[])),V=(f={wasPanning:!1,isPanning:!1,prevPointers:[],prevZoom:1,center:{x:0,y:0},transform:e({},H,{zoom:j})},s=n.useRef(f),[n.useCallback(function(){return s.current},[]),n.useCallback(function(n){return s.current="function"==typeof n?n(s.current):n,s.current},[])]),$=V[0],_=V[1],nn=n.useMemo(function(){return r(L,T)},[L,T]),en=n.useMemo(function(){return r(I,A)},[I,A]),tn=n.useMemo(function(){return r(Z,Y)},[Z,Y]),rn=n.useCallback(function(n){var e=N.current,t=$();return e&&(t.transform="function"==typeof n?n(t.transform):n,t.center.x=(e.offsetWidth/2-t.transform.x)/t.transform.zoom,t.center.y=(e.offsetHeight/2-t.transform.y)/t.transform.zoom,_(t),Q()),t.transform},[$,_,Q]),on=n.useCallback(function(n){return rn(function(e){var t=e.zoom,r="function"==typeof n?n({x:e.x,y:e.y}):n;return{x:nn(r.x),y:en(r.y),zoom:t}})},[nn,en,rn]),an=n.useCallback(function(n,e){var t=N.current;t&&rn(function(r){var o=r.x,a=r.y,u=r.zoom,i=tn("function"==typeof n?n(u):n),f=e?{x:e.x-t.offsetWidth/2,y:e.y-t.offsetHeight/2}:{x:0,y:0};return{x:nn(o+(f.x-o)*(u-i)/u),y:en(a+(f.y-a)*(u-i)/u),zoom:i}})},[nn,en,tn,rn]),un=n.useCallback(function(n){if(m){var e=$();e.prevPointers=n,e.isPanning=!0,_(e),R(n,e.transform)}},[m,R,_,$]),fn=n.useCallback(function(n){var e=$();if(e.isPanning){e.wasPanning=!0;var t=e.prevPointers;e.prevPointers=n,_(e);for(var r=0,a=0,u=Math.min(n.length,t.length,2),i=0;i<u;i++)r+=n[i].x-t[i].x,a+=n[i].y-t[i].y;r/=u,a/=u;var f=2===u?o(n[0],n[1])/o(t[0],t[1]):1;on(function(n){return{x:n.x+r,y:n.y+a}}),an(function(n){return n*f}),Q(),U(n,$().transform)}},[U,on,an,$,_,Q]),sn=n.useCallback(function(){$().isPanning&&(_(function(n){return e({},n,{isPanning:!1})}),F())},[F,$,_]),cn=n.useCallback(function(n){var t=$();P&&t.wasPanning&&(_(function(n){return e({},n,{wasPanning:!1})}),n.stopPropagation())},[P,$,_]),ln=n.useCallback(function(n){if(p&&N.current)if(n.preventDefault(),!d||n.ctrlKey){var e=a(N.current,{x:n.pageX,y:n.pageY}),t=n.deltaY;1===n.deltaMode&&(t*=15),an(function(n){return n*Math.pow(1-M,t)},e),J($().transform)}else on(function(e){return{x:e.x-n.deltaX,y:e.y-n.deltaY}})},[p,d,M,J,on,an,$]),mn=n.useCallback(function(n){n.preventDefault(),_(function(n){return e({},n,{prevZoom:n.transform.zoom})})},[_]),vn=n.useCallback(function(n){n.preventDefault();var e=a(N.current,{x:n.pageX,y:n.pageY});an($().prevZoom*n.scale,e),J($().transform)},[an,J,$]),pn=n.useCallback(function(n){if(n)x||n.addEventListener("wheel",ln),n.addEventListener("gesturestart",mn),n.addEventListener("gesturechange",vn),n.addEventListener("gestureend",vn);else if(N.current)return function(){var n=N.current;n&&(x||n.removeEventListener("wheel",ln),n.removeEventListener("gesturestart",mn),n.removeEventListener("gesturechange",vn),n.removeEventListener("gestureend",vn))};N.current=n},[ln,mn,vn,x]),yn=n.useCallback(function(n){return un(Array.from(n.touches).map(function(n){return{x:n.pageX,y:n.pageY}}))},[un]),dn=n.useCallback(function(n){return fn(Array.from(n.touches).map(function(n){return{x:n.pageX,y:n.pageY}}))},[fn]),gn=n.useCallback(function(n){0===n.touches.length?sn():un(Array.from(n.touches).map(function(n){return{x:n.pageX,y:n.pageY}}))},[sn,un]),xn=n.useCallback(function(n){return un([{x:n.pageX,y:n.pageY}])},[un]),hn=n.useCallback(function(n){return fn([{x:n.pageX,y:n.pageY}])},[fn]),bn=$();return{container:N.current,setContainer:pn,transform:"translate3D("+bn.transform.x+"px, "+bn.transform.y+"px, 0) scale("+bn.transform.zoom+")",center:bn.center,pan:{x:bn.transform.x,y:bn.transform.y},zoom:bn.transform.zoom,setPan:on,setZoom:an,panZoomHandlers:b?{onTouchStart:yn,onTouchMove:dn,onTouchEnd:gn,onTouchCancel:gn,onMouseDown:xn,onMouseMove:hn,onMouseUp:sn,onMouseLeave:sn,onClickCapture:cn}:{}}}});
//# sourceMappingURL=index.umd.js.map
